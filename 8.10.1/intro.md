# 2. GHCへの導入

これはGlasgow Haskell Compiler (GHC)の使用法のガイドです: Haskell 2010言語のための対話的かつバッチコンパイルシステムです。

GHCは2つの主要な構成要素を持ちます: 対話的なHaskellインタプリタ(GHCiとして知られています)、は[GHCiを使う](./ghci.md)で解説されており、かつバッチコンパイラは[GHCを使う](./ghc.md)で隈なく解説されています。実は、GHCは対話形式かバッチシステムかのどちらかを提供するために異なるオプションで動作する1つのプログラムから成り立っています。

バッチコンパイラはGHCiと並行して使用できます: コンパイルされたモジュールは対話式セッションで使用可能でかつ同じ方法で解釈済みのコードとして使われます、実際はGHCiが使う際にほとんどのライブラリは事前コンパイルされます。つまり両方の利点を最大限に活用できます。高速な事前コンパイルされたライブラリのコード、そして逆に素早くプログラムの一部をコンパイルしてより活発に開発できます。

GHCは並行性、外部関数インターフェース、例外、マルチパラメータの型クラスなどのような型システムの拡張、局所的全称かつ存在量化、関数型の依存関係、スコープ付き型変数や明示的なアンボックス化型を含んだ数多くの言語拡張をサポートしています。これらは全て[GHCの言語機能](./lang.md#9-ghcの言語機能)で解説されています。

GHCは広範囲な最適化ツールを持っています、ですからあなたが本当にやりたいとき(そして時間に余裕があるとき)にGHCは非常に素早いコードを生成します。代わりに、デフォルトのオプションは可能な限り素早くコンパイルするために生成されたコードの最適化にはあまり努力していません (おそらくGHCはそれほど素早いコンパイラではありませんが :-)。

GHCのプロファイリングシステムは「コストセンタースタック」をサポートしています: コールグラフ風の構造をしたHaskellプログラムのプロファイルを見る方法です。詳しくは[プロファイリング](./profiling.md)を見てください。

GHCには多数のライブラリが付属しています。これらは別のドキュメントで解説されています。

## 2.1. GHCの入手

[GHCのホームページ](http://www.haskell.org/ghc/)に行って「ダウンロード」のリンク先にしたがってあなたのプラットフォームに適したGHCをダウンロードしてください。

もしくは、GHCをビルドしたければ、[GHC Building Guide](https://gitlab.haskell.org/ghc/ghc/wikis/building)でソースを入手する方法を見つけ、それをあなたのシステムでビルドできます。ただし、GHCはHaskellで書かれているため、ビルドするためにはGHCが必要であることに注意してください。

## 2.2. メタ情報: ウェブサイト、メーリングリスト、他

ワールドワイドウェブには、魅力的ないくつかのURLが存在します。

- [GHC ホームページ](http://www.haskell.org/ghc/)
- [GHC デベロッパーホーム](https://gitlab.haskell.org/ghc/ghc) (開発者ドキュメンテーション、Wiki、バグトラッカー)

GHCに関する以下のメーリングリストを運営しています。参加をお勧めします。

`glasgou-haskell-users`

これはGHCユーザー同士がチャットするためのリストです。もしGHCについての明確な質問があれば、まず[FAQ](http://www.haskell.org/haskellwiki/GHC/FAQ)をチェックしてください。

購読者は[glasgow-haskell-users@haskell.org](glasgow-haskell-users@haskell.org)にメッセージを送ってリストに投稿できます。さらなる情報は[Mainlmanのページ](http://www.haskell.org/mailman/listinfo/ghc-devs)で見つかります。

`www.haskell.org`が提供するHaskellとGHCに関連したいくつかのメーリングリストがあります。[http://www.haskell.org/mailman/listinfo/](http://www.haskell.org/mailman/listinfo/)に全てのリストがあります。

## 2.3. GHCのバグの報告

Glasgow Haskellはシステムを変更しているため、確実にバグが存在します。もしも発見したら、[このWikiページ](https://gitlab.haskell.org/ghc/ghc/wikis/report-a-bug)を見て報告するための情報を確認してください。

## 2.4. GHCのバージョンの番付け方法

GHCバージョン6.8以降、規則に従ってGHCのバージョンを番付けしています。

> 安定版のブランチは`x.y`と番付けされていて、\<y\>は偶数です。安定版のブランチ`x.y`のリリースは`x.y.z`と番付けされ、\<z\>(>=1)はパッチレベルの数です。パッチレベルはバグ修正したリリースのみで、プログラマインターフェースはシステム提供のコードに変更されません。しかしながら、新しいパッチレベルを古いものにインストールした場合は、古いライブラリに対してコンパイルされたコードをリコンパイルする必要があります。
>
> メジャーリリース`x.y.z`の為の`__GLASGOW_HASKELL__`の値([Cプリプロセッサに影響するオプション](./phase.md#6113-cプリプロセッサに影響するオプション)を見る)は整数\<xyy\>です(もし\<y\>が1桁ならば、ゼロが追加されて、例えばバージョン6.8.2のGHCは`__GLASGOW_HASKELL__==608`になります)。
>
> 現在の安定版のブランチのリリースのスナップショットは[ダウンロード可能](http://www.haskell.org/ghc/dist/stable/dist/)になるでしょう、最新のソースは[gitリポジトリ](https://gitlab.haskell.org/ghc/ghc/wikis/repositories)から入手できます。
>
> 安定版のスナップショットのリリースは`x.y.z.YYYYMMDD`と名付けられます。`YYYYMMDD`はスナップショットがビルドされたソースの日付で、`x.y.z+1`はそのブランチに作られる次のリリースです。例えば、`6.8.1.20040225`は`6.8.2`の開発中の`6.8`ブランチのスナップショットになります。
>
> 現在のHEADのスナップショットのリリースは[ダウンロード可能](http://www.haskell.org/ghc/dist/current/dist/)になるでしょう、最新のソースは[gitリポジトリ](https://gitlab.haskell.org/ghc/ghc/wikis/repositories)から入手できます。
>
> 不安定版のスナップショットのリリースは`x.y.YYYYMMDD`と名付けられます。`YYYYMMDD`はスナップショットがビルドされたソースの日付です。例えば、`6.7.20040225`は`6.8`ブランチの作成前のHEADのスナップショットになるでしょう。
>
> スナップショットのリリースの`__GLASGOW_HASKELL__`の値は整数\<xyy\>です。決してこの値をテストする条件コードを書かないでください、しかし: インターフェースは日々更新されているため、`__GLASGOW_HASKELL__`の値に適切な細分性はなく、`__GLASGOW_HASKELL__`が与えられたメジャーリリースよりも等しいか、新しいか、古いかの条件のみでコンパイルすべきです。

GHCのコピーのバージョン番号は`ghc`と`--version`フラグで確認できます([冗長なオプション](./using.md#616-冗長なオプション)を参照してください)。

コンパイラのバージョンは`MIN_VERSION_GLASGOW_HASKELL`CPPマクロがついたコンパイル済みコード内でテストできます([**CPP**](./phase.md#6113-cプリプロセッサに影響するオプション)が使われている時のみ定義されます)。詳しくは[標準CPPマクロ](./phase.md#61131-標準cppマクロ)を参照してください。

